<script runat=server>
Platform.Load("Core", "1.1.5");
var api = new Script.Util.WSProxy();


// define global variables
var parentFolderId = 23234;
var queryObjectId = "2480b1be-86aa-4036-b44a-51e798209063";


// get gewinnspielName and country
var UpdateDE = DataExtension.Init("gewinnspielName");
var filter = { Property: "check", SimpleOperator: "equals", Value: "true" };
var data = UpdateDE.Rows.Retrieve(filter);

var data_len = data.length
Write("<br>rows: " + data_len)

for (var i = 0; i < 1 ; i++) {
    var gewinnspielName = data[i].gewinnspielName;
    var country = data[i].country;
} 

//check for already existing folder
var req = api.retrieve("DataFolder", ["ID"], {
    Property: "Name",
    SimpleOperator: "equals",
    Value: gewinnspielName
});

var existingFolderId = req.Results[0].ID;

</script>
